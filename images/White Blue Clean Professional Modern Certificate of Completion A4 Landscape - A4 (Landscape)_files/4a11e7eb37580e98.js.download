(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[33607],{

/***/ 883115:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(378020);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var K=__c.K;var m=__c.m;var AJs,mJs,lJs,nJs,oJs,pJs,qJs,rJs,tJs,uJs,vJs,sJs,wJs;__c.xJs=function(a,b){switch(a){case 1:a:switch(b.platform){case 11:a=lJs;break a;default:a=mJs}return b.BMa?[...a,...nJs]:a;case 3:return b.BMa?[...oJs,...pJs]:oJs;case 2:return b.BMa?[...qJs,...rJs]:qJs;case 4:return sJs;case 6:return tJs;case 7:return b.BMa?[...uJs,...vJs]:uJs;case 5:return wJs;default:throw new __c.v(a);}};
__c.yJs=function(a,b,c){const d=!!a.username;var e;if(e=a.valid){a:switch(b){case 4:case 6:case 5:e=!1;break a;case 1:case 3:case 2:case 7:e=!0;break a;default:throw new __c.v(b);}e=!e||d}return e&&__c.EKe(a.Vba,__c.xJs(b,c))};__c.zJs=function(a,b,c){return a===5&&b===2?c.$ie:a===5&&b===7?c.kje:a===19&&b===2?c.pje:a===19&&b===1?c.qje:a===23&&b===2?c.xje:a===29&&b===1?c.Sje:!1};
AJs=function(a){switch(a.lYb?.type){case "ALREADY_CONNECTED":return 2;case "USED_FOR_LOGIN":return 3;case "AT_LEAST_ONE_USED_FOR_LOGIN":return 4;case "CANNOT_BE_CHANGED":return 5;case "LIMIT_REACHED":return 6;default:return 0}};__c.DJs=function({aa:a,fa:b,Apb:c,aMa:d}){const e=b.wN,f=b.Sa,g=b.jm;b=b.errorService;a=a.user;return c?new __c.BJs(f,g,e,a.id,d):new __c.CJs(f,b,g,e,a.id,d)};
__c.zj.prototype.XHi=__c.fa(502,async function(a){const b=(0,__c.Sb)()();try{const c=__c.di([__c.es,"uploadtasks"]);__c.bi(c,{user:a.user,brand:m(a.brand),documents:a.yT,minDesiredUploadDate:a.$oo,maxDesiredUploadDate:a.Xko,uploadTaskStatus:a.o3&&__c.eqc.serialize(a.o3),deleted:a.deleted,excludeDeletedDocuments:m(a.JMr),filteredForContentPlanner:m(a.h3e),isSharedWithTeam:a.Ire,uploadTaskIds:a.Huu,continuation:a.continuation,limit:m(a.limit)});const d=__c.gi(c),[e,{D8p:f}]=b.r(await b.s(Promise.all([this.za.get(d,
{Oa:"finduploadtasksapi"}),__webpack_require__.me(145383).then(()=>({D8p:__c.SAs}))])));return f.deserialize(e)}finally{b.s()}});
__c.zj.prototype.o3e=__c.fa(496,async function(a){const b=(0,__c.Sb)()();try{__c.ma(a.user!=null&&/^U[a-zA-Z0-9_-]{10}$/.test(a.user));const c=__c.di([__c.es,"oauthsummaries",a.user]);__c.bi(c,{platform:__c.yi.serialize(a.platform),fetchAvatar:m(a.Ylc)});const d=__c.gi(c),[e,{z7p:f}]=b.r(await b.s(Promise.all([this.za.get(d,{Oa:"findoauthsummariesapi"}),__webpack_require__.me(145383).then(()=>({z7p:__c.NAs}))])));return f.deserialize(e)}finally{b.s()}});
__c.tj.prototype.tbh=__c.fa(109,async function(a){const b=(0,__c.Sb)()();try{__c.ma(a.user!=null&&/^U[a-zA-Z0-9_-]{10}$/.test(a.user));__c.ma(a.platform!=null&&/^([A-Z_]+)$/.test(a.platform));const c=__c.di([__c.zr,"users",a.user,"oauth",a.platform]);__c.bi(c,{fetchAvatar:a.Ylc});const d=__c.gi(c),[e,{dcq:f}]=b.r(await b.s(Promise.all([this.za.get(d,{Oa:"getoauthsummaryapi"}),__webpack_require__.me(587617).then(()=>({dcq:__c.wRp}))])));return f.deserialize(e)}finally{b.s()}});mJs=[1,7];lJs=[1,2,13];
nJs=[3];oJs=[1,8];pJs=[4];qJs=[1,9];rJs=[5];tJs=[1,11];uJs=[1,12,9];vJs=[6];sJs=[1,10];wJs=[];__c.EJs=__c.H(()=>({user:__c.S("user",1),platform:__c.S("platform",2),Ylc:__c.Vo("fetchAvatar",3)}));__c.FJs=__c.H(()=>({user:__c.S(1),platform:__c.Wa(2,__c.yi),Ylc:__c.Uo(3)}));
__c.CJs=class{static G(a){__c.M(a,{xea:__c.Gu,Ci:__c.Gu})}async Rma(a){const b=(0,__c.zu)()();try{const c=new __c.EJs({user:this.userId,platform:__c.yi.serialize(a),Ylc:!0}),{summary:d}=b.r(await b.s(this.Sa.tbh(c)));return new __c.y5g(d)}finally{b.s()}}Wgd(a){return this.xea(a,1,{BMa:!1})}async xea(a,b,c={BMa:!1}){const d=(0,__c.zu)()();try{a.error=void 0;const n=__c.xJs(b,{BMa:c.BMa||__c.zJs(a.platform,b,this.aMa),platform:a.platform}),p=n.some(w=>a.O$a.has(w)),{yNb:q,QCb:r}=this.zNb.xme();let t;
try{t=d.r(await d.s(this.wN.xea({platform:a.platform,permissions:n,QCb:r,msc:p})))}catch(w){d.r();this.errorService.na(w,{Ea:"oauth_controller.authorisationUnknownError"});this.Ci(a,K("WxDfwQ"),0);return}switch(t.type){case "SUCCESS":break;case "DENIED":this.Ci(a,K("vxF9jQ"),1);return;default:throw new __c.v(t);}const u=d.r(await d.s(this.Sa.rQb(new __c.cSg({user:this.userId,credentials:__c.FKe(t,a.platform),yNb:q,kmb:!0}))));if(u.type==="ERROR")this.Ci(a,u.message,AJs(u),u.lYb);else{var {summary:{username:e,
Yw:f,Asc:g,iW:h}}=d.r(await d.s(this.Sa.tbh(new __c.EJs({user:this.userId,platform:__c.yi.serialize(a.platform),Ylc:!0})))),k=t.O$a,l=t.Vba;(0,__c.Jv)(()=>{a.valid=!0;a.iW=h;a.username=e;a.Yw=f;a.Vba=new Set(l);a.O$a=new Set(k);a.error=__c.yJs(a,b,c)?void 0:{message:K("vxF9jQ"),type:1};a.Asc=g})}}finally{d.s()}}Ci(a,b,c,d){a.error={message:b,type:c,lYb:d}}constructor(a,b,c,d,e,f,g=new __c.A5g){this.Sa=a;this.errorService=b;this.jm=c;this.wN=d;this.userId=e;this.aMa=f;this.zNb=g;__c.CJs.G(this)}};
__c.CJs.prototype.Cmg=__c.ca(1265);__c.CJs.prototype.Jdf=__c.ca(1263);__c.GJs=__webpack_require__(75402)._;var HJs=__webpack_require__(186901),IJs=HJs.h5,JJs=HJs.XI;__c.BJs=class{static G(a){__c.M(a,{xea:JJs,Ci:JJs})}async Rma(a){const b=(0,__c.GJs)()();try{const c=new __c.FJs({user:this.userId,platform:a,Ylc:!0});let {yNc:[d]}=b.r(await b.s(this.jm.o3e(c)));d==null&&(d={platform:a,valid:!1,Vba:[],O$a:[],username:void 0,Yw:void 0,Asc:void 0,iW:void 0});return new __c.y5g(d)}finally{b.s()}}Wgd(a){return this.xea(a,1,{BMa:!1})}async xea(a,b,c={BMa:!1}){const d=(0,__c.GJs)()();try{a.error=void 0;const q=__c.xJs(b,{BMa:c.BMa||__c.zJs(a.platform,b,this.aMa),platform:a.platform}),
r=q.some(y=>a.O$a.has(y)),{yNb:t,QCb:u}=this.zNb.xme();let w;try{w=d.r(await d.s(this.wN.xea({platform:a.platform,permissions:q,QCb:u,msc:r})))}catch(y){d.r();this.Ci(a,K("WxDfwQ"),0);return}switch(w.type){case "SUCCESS":break;case "DENIED":this.Ci(a,K("vxF9jQ"),1);return;default:throw new __c.v(w);}const x=d.r(await d.s(this.Sa.rQb(new __c.cSg({user:this.userId,credentials:__c.FKe(w,a.platform),yNb:t,kmb:!0}))));if(x.type==="ERROR")this.Ci(a,x.message,7);else{var e=new __c.FJs({user:this.userId,
platform:a.platform,Ylc:!0}),{yNc:[f]}=d.r(await d.s(this.jm.o3e(e))),{username:g,Yw:h,Asc:k,iW:l}=f||{},n=w.O$a,p=w.Vba;IJs(()=>{a.valid=!0;a.iW=l;a.username=g;a.Yw=h;a.Vba=new Set(p);a.O$a=new Set(n);a.error=__c.yJs(a,b,c)?void 0:{message:K("vxF9jQ"),type:1};a.Asc=k})}}finally{d.s()}}Ci(a,b,c){a.error={message:b,type:c}}constructor(a,b,c,d,e,f=new __c.A5g){this.Sa=a;this.jm=b;this.wN=c;this.userId=d;this.aMa=e;this.zNb=f;__c.BJs.G(this)}};__c.BJs.prototype.Cmg=__c.ca(1264);
__c.BJs.prototype.Jdf=__c.ca(1262);
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/4a11e7eb37580e98.js.map